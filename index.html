<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="/favicon.png" />
  <title>ENCODED COIN</title>
  <style>
    :root {
      --bg: #0a0a0f;
      --glass: rgba(255, 255, 255, 0.08);
      --border: rgba(255, 255, 255, 0.15);
      --accent: #ff3b3b;
      --text: #e6edf3;
      --muted: #9fb0c1;
      --ok: #33d17a;
      --xblue: #1DA1F2;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }

    body {
      color: var(--text);
      font-family: 'Inter', system-ui, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      background: radial-gradient(circle at center, #1a0000 0%, #06060a 80%);
      overflow-x: hidden;
      position: relative;
      min-height: 100vh;
      padding-bottom: 60px;
    }

    .animated-grid {
      position: fixed; inset: 0;
      background-image: linear-gradient(rgba(255,0,0,0.07) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(255,0,0,0.07) 1px, transparent 1px);
      background-size: 50px 50px;
      z-index: 0;
      animation: moveGrid 30s linear infinite;
    }
    @keyframes moveGrid {
      0% { background-position: 0 0, 0 0; }
      100% { background-position: 100px 100px, 100px 100px; }
    }

    .app {
      position: relative; z-index: 1;
      margin-top: 60px;
      width: min(900px, 95%);
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      justify-content: center;
      gap: 20px;
    }

    .explain {
      flex: 1; color: var(--muted); font-size: 15px; line-height: 1.6;
      max-width: 250px; position: relative;
    }
    .explain::after {
      content: ''; position: absolute; top: 50%; right: -30px;
      width: 60px; height: 2px;
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
      transform: translateY(-50%) rotate(3deg);
      animation: pulseLine 3s ease-in-out infinite;
      box-shadow: 0 0 12px rgba(255,0,0,0.8), 0 0 24px rgba(255,0,0,0.4);
    }
    .explain.right::after {
      left: -30px; right: auto;
      transform: translateY(-50%) rotate(-3deg);
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
    }
    @keyframes pulseLine {
      0%, 100% { opacity: 0.4; box-shadow: 0 0 10px rgba(255,0,0,0.6); }
      50% { opacity: 1; box-shadow: 0 0 20px rgba(255,50,50,1); }
    }

    @media (max-width: 768px) {
      .explain { display: none; }
    }

    .main-section { flex: 2; display: flex; flex-direction: column; align-items: center; }

    .coin-bar {
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      gap: 6px; position: relative; margin-bottom: 15px;
    }
    .coin-address-line { display: flex; align-items: center; gap: 8px; justify-content: center; }
    .coin-address {
      background: var(--glass); backdrop-filter: blur(8px);
      padding: 8px 12px; border-radius: 10px; border: 1px solid var(--border);
      font-size: 13px; color: var(--muted);
    }
    .copy-symbol {
      width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;
      border-radius: 8px; background: rgba(255,255,255,0.1);
      border: 1px solid var(--border); cursor: pointer; color: var(--ok);
      font-size: 18px; font-weight: 700; transition: all 0.2s ease; position: relative;
    }
    .copy-symbol:hover { background: rgba(0,255,150,0.15); transform: translateY(-1px); }
    .copy-symbol:active { transform: scale(0.95); }
    .copied-popup {
      position: absolute; top: -35px; background: rgba(0,255,150,0.15);
      color: var(--ok); padding: 4px 10px; border-radius: 8px;
      font-size: 12px; border: 1px solid var(--ok); opacity: 0;
      animation: popupFade 1.2s ease forwards; pointer-events: none;
    }
    @keyframes popupFade {
      0% { opacity: 0; transform: translateY(5px); }
      20%,80% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-5px); }
    }

    .coin-buttons { display: flex; gap: 10px; justify-content: center; }

    .btn {
      border: none; background: var(--glass); backdrop-filter: blur(10px);
      color: var(--text); padding: 8px 12px; border-radius: 10px;
      cursor: pointer; font-weight: 600; font-size: 13px;
      transition: transform .1s ease, background .2s ease, box-shadow .3s;
      text-decoration: none; display: inline-flex; align-items: center; justify-content: center;
      min-width: 100px;
    }
    .btn:hover { background: rgba(255,0,0,0.15); transform: translateY(-1px); }
    .btn.active { box-shadow: 0 0 15px var(--accent); background: rgba(255,0,0,0.3); }

    .glass-block {
      background: var(--glass); border: 1px solid var(--border);
      border-radius: 18px; padding: 20px; width: 100%;
      backdrop-filter: blur(12px);
      box-shadow: 0 0 25px rgba(255,0,0,0.15);
      display: flex; flex-direction: column; gap: 16px; max-width: 600px; position: relative;
    }

    .row { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; align-items: center; }
    .swap-icon {
      order: -1; margin-right: 8px; font-size: 20px; color: var(--accent);
      cursor: pointer; transition: transform 0.3s ease, color 0.3s ease; display: inline-flex; align-items: center;
    }
    .swap-icon:hover { color: var(--ok); transform: rotate(180deg); }

    textarea {
      width: 100%; min-height: 160px; background: rgba(0,0,0,0.25);
      border: 1px solid var(--border); border-radius: 12px;
      padding: 12px 14px; color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px; resize: vertical; outline: none;
    }

    footer {
      position: fixed; bottom: 0; left: 0; width: 100%;
      background: rgba(255,255,255,0.05); backdrop-filter: blur(10px);
      border-top: 1px solid var(--border); text-align: center;
      color: var(--muted); font-size: 13px; padding: 10px 0; z-index: 2;
    }
    footer span { color: var(--accent); font-weight: 600; }
  </style>
</head>
<body>
  <div class="animated-grid"></div>
  <div class="app">
    <div class="explain">
      <h3 style="color:var(--ok);">What is Encoding?</h3>
      <p>It’s how we talk in whispers onchain. Your text gets flipped into Base64 — unreadable to normies, safe from the noise. Only real ones decode.</p>
    </div>

    <div class="main-section">
      <div class="coin-bar" id="coinBar">
        <div class="coin-address-line">
          <div class="coin-address" id="coinAddress">soonpump</div>
          <div class="copy-symbol" id="copyAddress">⧉</div>
        </div>
        <div class="coin-buttons">
          <a class="btn" id="xBtn">X</a>
          <a class="btn" id="buyBtn">Buy</a>
        </div>
      </div>

      <div class="glass-block">
        <h2 style="text-align:center; color:var(--accent); letter-spacing:1px; text-transform:uppercase;">ENCODED COIN</h2>
        <textarea id="input" placeholder="Paste your text here..."></textarea>
        <div class="row">
          <span class="swap-icon" id="swapIcon" title="Swap input/output">⇅</span>
          <button class="btn active" id="btn-encode">Encode</button>
          <button class="btn" id="btn-decode">Decode</button>
          <button class="btn" id="btn-clear">Clear</button>
        </div>
        <textarea id="output" placeholder="Result will appear here" readonly></textarea>
        <div class="row">
          <button class="btn ok" id="btn-copy">Copy Output</button>
          <button id="shareX" class="btn" style="background:rgba(29,155,240,0.2); color:var(--xblue); border:1px solid rgba(29,155,240,0.4); cursor:pointer;">Share to X</button>
        </div>
      </div>
    </div>

    <div class="explain right">
      <h3 style="color:var(--accent);">What is Decoding?</h3>
      <p>It’s how you read what the chain tried to whisper. Take a Base64 string, flip it back to normal — and you’ve unlocked the message.</p>
    </div>
  </div>

  <footer>
    <p>© <span>ENCODED COIN</span> - Secure. Simple. On-chain Utility.</p>
  </footer>

  <script>
    const byId = (id) => document.getElementById(id);
    const $copyAddress = byId('copyAddress');
    const $coinAddress = byId('coinAddress');
    const xBtn = byId('xBtn');
    const buyBtn = byId('buyBtn');

    async function robustCopy(text) {
      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(text);
          return true;
        }
      } catch {}
      try {
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        ta.remove();
        return true;
      } catch { return false; }
    }

    function popupCopied(el) {
      const popup = document.createElement('div');
      popup.className = 'copied-popup';
      popup.textContent = 'Copied!';
      el.appendChild(popup);
      setTimeout(() => popup.remove(), 1200);
    }

    $copyAddress.addEventListener('click', async () => {
      const text = ($coinAddress.textContent || '').trim();
      const ok = await robustCopy(text);
      if (ok) popupCopied($copyAddress);
    });

    xBtn.addEventListener('click', () => window.open('https://x.com/encodedcoin', '_blank', 'noopener,noreferrer'));
    buyBtn.addEventListener('click', () => window.open('https://pump.fun/coin/', '_blank', 'noopener,noreferrer'));

    const $input = byId('input');
    const $output = byId('output');
    const encodeBtn = byId('btn-encode');
    const decodeBtn = byId('btn-decode');
    const clearBtn  = byId('btn-clear');
    const copyOutBtn = byId('btn-copy');
    const shareXBtn = byId('shareX');
    const swapIcon = byId('swapIcon');

    function toBase64(str){
      try {
        return btoa(unescape(encodeURIComponent(str)));
      } catch {
        return '';
      }
    }
    function fromBase64(b64){
      try {
        return decodeURIComponent(escape(atob(b64)));
      } catch {
        return '';
      }
    }

    let mode = 'encode';
    function setMode(m){
      mode=m;
      encodeBtn.classList.toggle('active', m==='encode');
      decodeBtn.classList.toggle('active', m==='decode');
      updateOutput();
    }
    encodeBtn.addEventListener('click', ()=> setMode('encode'));
    decodeBtn.addEventListener('click', ()=> setMode('decode'));

    function updateOutput(){
      const val = $input.value;
      if (!val){
        $output.value = '';
        if (shareXBtn) shareXBtn.style.display = 'none';
        return;
      }
      if (mode === 'encode'){
        $output.value = toBase64(val);
        if (shareXBtn){
          const text = `${$output.value}\n\n$ENCODED`;
          shareXBtn.style.display = 'inline-flex';
          shareXBtn.onclick = () => {
            const url = `https://x.com/intent/tweet?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank', 'noopener,noreferrer');
          };
        }
      } else {
        $output.value = fromBase64(val);
        if (shareXBtn) shareXBtn.style.display = 'none';
      }
    }

    $input.addEventListener('input', updateOutput);

    clearBtn.addEventListener('click', () => {
      $input.value='';
      $output.value='';
      if (shareXBtn) shareXBtn.style.display='none';
    });

    swapIcon.addEventListener('click', () => {
      const temp = $input.value;
      $input.value = $output.value;
      $output.value = temp;
      setMode(mode === 'encode' ? 'decode' : 'encode');
      updateOutput();
    });

    copyOutBtn.addEventListener('click', async () => {
      const ok = await robustCopy($output.value || '');
      if (ok) popupCopied(copyOutBtn);
    });
  </script>
</body>
</html>
